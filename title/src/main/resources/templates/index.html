<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/">
<head>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <title>BoardList Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="contentTable">
        <div class="fool">
            <h1 onclick="location.href='/'"> 상품 리스트 </h1>
        </div>
        <table class="table">
            <thead>
            <tr>
                <div class="row">
                    <div class="col-md-2">
                        <th scope="col">ID</th>
                    </div>
                    <div class="col-md-6">
                        <th scope="col">Name</th>
                    </div>
                    <div class="col-md-4">
                        <th scope="col">date</th>
                    </div>
                </div>
                <div class="col-md-8">
                    <a th:href="@{/board/regist}">
                        <button class="btn btn-outline-primary">상품 등록</button>
                    </a>
                </div>
            </tr>
            </thead>
            <tbody class="table-group-divider" >
                <tr th:each="board : ${boards}">
                    <td th:text="${board.id}"></td>
                    <td><a th:href="@{/board/detail/{id}(id=${board.id})}" th:text="${board.name}"></a></td>
                    <td th:text="${board.date}"></td>
                </tr>

            </tbody>
        </table>
        <div class="row">
            <div class="col-sm-8">
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li class="page-item" th:class="${currentPage != 1 ? 'page-item' : 'page-item disabled'}">
                            <input type="hidden" th:value="${search}">
                            <a class="page-link" th:if="${currentPage != 1}"
                               th:href="@{/search(search=${param.search}, page=1, searchKeyword=${param.searchKeyword})}">처음</a>
                        </li>
                        <li class="page-item" th:class="${currentPage == 1 ? 'page-item disabled' : 'page-item'}">
                            <input type="hidden" th:value="${search}">
                            <a class="page-link" th:if="${currentPage != null && currentPage != 1}"
                               th:href="@{/search(search=${param.search}, page=${currentPage -1 }, searchKeyword=${param.searchKeyword})}" aria-label="Previous">
                                <span aria-hidden="true">이전</span>
                            </a>
                        </li>
                        <li class="page-item" th:class="${pageNum.equals(currentPage) ? 'page-item active' : 'page-item'}" th:each="pageNum : ${#numbers.sequence(startPage, endPage)}">
                            <a class="page-link" th:href="@{/search(search=${param.search}, page=${pageNum}, searchKeyword=${param.searchKeyword})}" th:text="${pageNum}"></a>
                        </li>
                        <li class="page-item" th:class="${currentPage == totalPages ? 'page-item disabled' : 'page-item'}">
                            <input type="hidden" th:value="${search}">
                            <a class="page-link" th:if="${currentPage != null && currentPage != totalPages}"
                               th:href="@{/search(search=${param.search}, page=${currentPage+1}, searchKeyword=${param.searchKeyword})}" aria-label="Next">
                                <span aria-hidden="true">다음</span>
                            </a>
                        </li>
                        <li class="page-item" th:class="${currentPage != totalPages ? 'page-item' : 'page-item disabled'}">
                            <input type="hidden" th:value="${search}">
                            <a class="page-link" th:if="${currentPage != totalPages}"
                               th:href="@{/search(search=${param.search}, page=${totalPages}, searchKeyword=${param.searchKeyword})}">마지막</a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="col-sm-4">
                <form action="/search" method="get" class="input-group input-group-sm mb-3" id="pageForm">
                    <input type="hidden" name="page" id="currentPage" th:value="${currentPage}" />
                    <input type="hidden" name="search" th:value="${search}">
                    <input type="text" class="form-control" name="searchKeyword" id="searchKeyword" th:value="${searchKeyword}" placeholder="Search" aria-label="Recipient's username" aria-describedby="button-addon2" />
                    <button class="btn btn-outline-secondary" type="button" onclick="resetPage()" style="color:black">검색</button>
                </form>
            </div>
        </div>
    </div>
</body>
<script>
    function resetPage() {
        if (document.getElementById('searchKeyword').value === '') {
            document.getElementById('currentPage').value = 1;
        }
        document.getElementById('currentPage').setAttribute('value', '1');
        document.getElementById('searchKeyword').closest('form').submit();
    }
</script>
<style>
    .page-link {
        color: #999;
        background-color: #222;
        border-color: #444;
    }

    .page-item.active .page-link {
        z-index: 1;
        color: #ccc;
        font-weight:bold;
        background-color: #333;
        border-color: #444;

    }

    .page-link:focus, .page-link:hover {
        color: #ccc;
        background-color: #222;
        border-color: #444;
    }
    .btn-outline-primary{
        color: blue;
    }
</style>
</html>